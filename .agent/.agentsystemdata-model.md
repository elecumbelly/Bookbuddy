# Core Data Model - Bookbuddy

## Current State (Template)

### Item Entity
```
Item
├── timestamp: Date
```

**Status:** Basic template entity - needs replacement with book-focused model

## Proposed Book Model

### Book Entity
```
Book
├── id: UUID (Primary Key)
├── title: String
├── author: String
├── isbn: String? (Optional, for lookup)
├── publishedDate: Date?
├── pageCount: Int32?
├── currentPage: Int32 (default: 0)
├── rating: Int16? (1-5 scale)
├── status: String (to-read, reading, completed)
├── dateAdded: Date
├── dateStarted: Date?
├── dateCompleted: Date?
├── notes: String?
├── coverImageData: Data? (for offline storage)
└── genres: [Genre] (many-to-many relationship)
```

### Genre Entity (Future)
```
Genre
├── id: UUID
├── name: String
└── books: [Book] (many-to-many relationship)
```

## Migration Strategy

1. **Phase 1:** Replace Item with basic Book entity
2. **Phase 2:** Add reading progress fields
3. **Phase 3:** Add Genre relationship
4. **Phase 4:** Add cover images and advanced metadata

## Core Data Configuration

- **Thread Safety:** Use `viewContext` for UI, background contexts for imports
- **Merge Policy:** `NSMergeByPropertyObjectTrumpMergePolicy`
- **Automatic Migration:** Plan lightweight migrations where possible
- **Validation:** Implement custom validation for ISBN, page numbers